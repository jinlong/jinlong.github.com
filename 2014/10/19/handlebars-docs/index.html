
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>Handlebars 文档笔记 | Alon&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="Alon Zhang">
    
    <meta name="description" itemprop="description" content="前段时间项目正好用到 Handlebars ，边研究文档边翻译了下，留个备份">
    
    
    
    
    <link rel="alternative" href="atom.xml" title="Alon&#39;s Blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/pacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/pacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

  <body>
    <header>
      <div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Alon&#39;s Blog">Alon&#39;s Blog</a></h1>
				<h2 class="blog-motto">一边翻译一边学习---涂鸦码龙</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="http://jinlongz.lofter.com/">涂鸦志</a></li>
					
						<li><a href="/archives">存档</a></li>
					
						<li><a href="/categories">分类</a></li>
					
					<li>
					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:jinlong.github.io">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/10/19/handlebars-docs/" title="Handlebars 文档笔记" itemprop="url">Handlebars 文档笔记</a>
  </h1>
  <p class="article-author">By
    
      <a href="http://jinlong.github.io" title="Alon Zhang">Alon Zhang</a>
    </p>
  <p class="article-time">
    <time datetime="2014-10-19T14:30:55.000Z" itemprop="datePublished">10月 19 2014</time>
    更新日期:<time datetime="2014-10-25T02:04:36.000Z" itemprop="dateModified">10月 25 2014</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="# 基础 _Blocks"><span class="toc-number">1.</span> <span class="toc-text">基础 Blocks</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="# 内建 _helper"><span class="toc-number">2.</span> <span class="toc-text">内建 helper</span></a></li><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#with_helper"><span class="toc-number">2.1.</span> <span class="toc-text">with helper</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="# 简单迭代器 _each_helper"><span class="toc-number">2.2.</span> <span class="toc-text">简单迭代器 each helper</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="# 条件语句 _if_helper"><span class="toc-number">2.3.</span> <span class="toc-text">条件语句 if helper</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#unless_helper"><span class="toc-number">2.4.</span> <span class="toc-text">unless helper</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#log_helper"><span class="toc-number">2.5.</span> <span class="toc-text">log helper</span></a></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#JavaScript_ 编译模板 "><span class="toc-number">3.</span> <span class="toc-text">JavaScript 编译模板</span></a></li><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#HTML_ 转义 "><span class="toc-number">3.1.</span> <span class="toc-text">HTML 转义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Partials_ 局部模板 "><span class="toc-number">3.2.</span> <span class="toc-text">Partials 局部模板</span></a></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="# 内建工具 "><span class="toc-number">4.</span> <span class="toc-text">内建工具</span></a></li><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="# 转义字符串 "><span class="toc-number">4.1.</span> <span class="toc-text">转义字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="# 判断空值 "><span class="toc-number">4.2.</span> <span class="toc-text">判断空值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="# 扩展对象 "><span class="toc-number">4.3.</span> <span class="toc-text">扩展对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="# 转字符串 "><span class="toc-number">4.4.</span> <span class="toc-text">转字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="# 判断数组 "><span class="toc-number">4.5.</span> <span class="toc-text">判断数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="# 判断函数 "><span class="toc-number">4.6.</span> <span class="toc-text">判断函数</span></a></li></ol>
		</div>
		
		<blockquote>
<p>官方文档：<a href="http://handlebarsjs.com/" target="_blank">http://handlebarsjs.com/</a><br>笔记：<a href="http://weibo.com/newwave" target="_blank">涂鸦码龙</a></p>
</blockquote>
<p>Handlebars 兼容 <a href="https://github.com/janl/mustache.js" target="_blank">Mustache 模板</a>。</p>
<p>对比了几个 Node.js 常用模板，什么 EJS 、Jade 等等，还是感觉 Handlebars 比较顺手，模板只做数据展示，前端逻辑的东西通过 helper 实现，HTML 中没有掺杂太多 JS 的东西，看起来整洁一些。</p>
<p>Express 中引入 Handlebars 模板的话，需要引入<a href="https://github.com/donpark/hbs" target="_blank">hbs 模块</a></p>
<hr>
<p><strong>handlebars 表达式</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">h1</span>&gt;</span>&#123;&#123;title}}<span class="tag">&lt;/<span class="title">h1</span>&gt;</span>
</pre></td></tr></table></figure>

<p>在上下文中找 title 属性，获取它的值</p>
<p><strong>点分割表达式</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">h1</span>&gt;</span>&#123;&#123;article.title}}<span class="tag">&lt;/<span class="title">h1</span>&gt;</span>
</pre></td></tr></table></figure>

<p>当前上下文找 article 属性，再找它的 title 属性</p>
<p><em>标识符可以是除了以下字符以外的 unicode 字符</em><br>Whitespace ! “ # % &amp; ‘ ( ) * + , . / ; &lt; = &gt; @ [ \ ] ^ ` { | } ~</p>
<p><strong>不合法的标识符用 “[]” 包装</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre>&#123;&#123;#each articles.[10].[#comments]}}
  <span class="tag">&lt;<span class="title">h1</span>&gt;</span>&#123;&#123;subject}}<span class="tag">&lt;/<span class="title">h1</span>&gt;</span>
  <span class="tag">&lt;<span class="title">div</span>&gt;</span>
    &#123;&#123;body}}
  <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
&#123;&#123;/each}}
</pre></td></tr></table></figure>

<p><strong>不转义</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>&#123;&#123;&#123;foo}}}
</pre></td></tr></table></figure>

<p><strong>Helpers</strong></p>
<p>0 或多个参数，用空格分割，每个参数是个 handlebars 表达式</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>&#123;&#123;&#123;link story}}}
</pre></td></tr></table></figure>

<p><em>link</em> 是 helper 名字，<em>story</em> 是 helper 参数。</p>
<p><strong>注册 helper</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>Handlebars.registerHelper(<span class="string">'link'</span>, <span class="function"><span class="keyword">function</span><span class="params">(object)</span> {</span>
  <span class="keyword">return</span> <span class="keyword">new</span> Handlebars.SafeString(
    <span class="string">"&lt;a href='"</span> + object.url + <span class="string">"'&gt;"</span> + object.text + <span class="string">"&lt;/a&gt;"</span>
  );
});
</pre></td></tr></table></figure>

<p>helper 返回 HTML ，不想被转义，用 <code>Handlebars.SafeString()</code>。</p>
<p>helper 把接收的上下文作为 <code>this</code> 上下文</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">ul</span>&gt;</span>
  &#123;&#123;#each items}}
  <span class="tag">&lt;<span class="title">li</span>&gt;</span>&#123;&#123;agree_button}}<span class="tag">&lt;/<span class="title">li</span>&gt;</span>
  &#123;&#123;/each}}
<span class="tag">&lt;/<span class="title">ul</span>&gt;</span>
</pre></td></tr></table></figure>

<p><strong>上下文和 helper：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="keyword">var</span> context = {
  items: [
    {name: <span class="string">"Handlebars"</span>, emotion: <span class="string">"love"</span>},
    {name: <span class="string">"Mustache"</span>, emotion: <span class="string">"enjoy"</span>},
    {name: <span class="string">"Ember"</span>, emotion: <span class="string">"want to learn"</span>}
  ]
};
</pre></td></tr></table></figure>


<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>Handlebars.registerHelper(<span class="string">'agree_button'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
  <span class="keyword">return</span> <span class="keyword">new</span> Handlebars.SafeString(
    <span class="string">"&lt;button&gt;I agree. I "</span> + <span class="keyword">this</span>.emotion + <span class="string">" "</span> + <span class="keyword">this</span>.name + <span class="string">"&lt;/button&gt;"</span>
  );
});
</pre></td></tr></table></figure>

<p>输出结果：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">ul</span>&gt;</span>
  <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">button</span>&gt;</span>I agree. I love Handlebars<span class="tag">&lt;/<span class="title">button</span>&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span>
  <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">button</span>&gt;</span>I agree. I enjoy Mustache<span class="tag">&lt;/<span class="title">button</span>&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span>
  <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">button</span>&gt;</span>I agree. I want to learn Ember<span class="tag">&lt;/<span class="title">button</span>&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span>
<span class="tag">&lt;/<span class="title">ul</span>&gt;</span>
</pre></td></tr></table></figure>

<p>也可以直接传字符串参数</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>&#123;&#123;&#123;link "See more..." story.url}}}
</pre></td></tr></table></figure>

<p>等价于</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>&#123;&#123;&#123;link story.text story.url}}}
</pre></td></tr></table></figure>


<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>Handlebars.registerHelper(<span class="string">'link'</span>, <span class="function"><span class="keyword">function</span><span class="params">(text, url)</span> {</span>
  <span class="keyword">return</span> <span class="keyword">new</span> Handlebars.SafeString(
    <span class="string">"&lt;a href='"</span> + url + <span class="string">"'&gt;"</span> + text + <span class="string">"&lt;/a&gt;"</span>
  );
});
</pre></td></tr></table></figure>

<p>helper 最后一个参数也可以接收可选的键值对序列（文档提到的 <strong>hash</strong> 参数）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>&#123;&#123;&#123;link "See more..." href=story.url class="story"}}}
</pre></td></tr></table></figure>

<p><strong>hash</strong> 参数的 <code>key</code> 必须是简单的标识符，<code>value</code> 是 Handlebars 表达式， <code>value</code> 可以是简单的标识符，路径，或者字符串。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="code"><pre>Handlebars.registerHelper(<span class="string">'link'</span>, <span class="function"><span class="keyword">function</span><span class="params">(text, options)</span> {</span>
  <span class="keyword">var</span> attrs = [];

  <span class="keyword">for</span>(<span class="keyword">var</span> prop <span class="keyword">in</span> options.hash) {
    attrs.push(prop + <span class="string">'="'</span> + options.hash[prop] + <span class="string">'"'</span>);
  }

  <span class="keyword">return</span> <span class="keyword">new</span> Handlebars.SafeString(
    <span class="string">"&lt;a "</span> + attrs.join(<span class="string">" "</span>) + <span class="string">"&gt;"</span> + text + <span class="string">"&lt;/a&gt;"</span>
  );
});
</pre></td></tr></table></figure>

<h1 id=" 基础 _Blocks">基础 Blocks</h1>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"entry"</span>&gt;</span>
  <span class="tag">&lt;<span class="title">h1</span>&gt;</span>&#123;&#123;title}}<span class="tag">&lt;/<span class="title">h1</span>&gt;</span>
  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"body"</span>&gt;</span>
    &#123;&#123;#noop}}&#123;&#123;body}}&#123;&#123;/noop}}
  <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
</pre></td></tr></table></figure>


<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>Handlebars.registerHelper(<span class="string">'noop'</span>, <span class="function"><span class="keyword">function</span><span class="params">(options)</span> {</span>
  <span class="keyword">return</span> options.fn(<span class="keyword">this</span>);
});
</pre></td></tr></table></figure>

<p>noop helper 实际跟没有 helper 类似，只是传递上下文，返回字符串。Handlebars 把当前的上下文作为 <code>this</code> 。</p>
<h1 id=" 内建 _helper">内建 helper</h1>
<h2 id="with_helper">with helper</h2>
<p>根据模板传递的上下文解析模板</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"entry"</span>&gt;</span>
  <span class="tag">&lt;<span class="title">h1</span>&gt;</span>&#123;&#123;title}}<span class="tag">&lt;/<span class="title">h1</span>&gt;</span>
  &#123;&#123;#with story}}
    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"intro"</span>&gt;</span>&#123;&#123;{intro}}}<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"body"</span>&gt;</span>&#123;&#123;{body}}}<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
  &#123;&#123;/with}}
<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
</pre></td></tr></table></figure>

<p>当 JSON 对象包含嵌套属性时，不必再三重复父属性的名字。比如以下数据：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre>{
  title: <span class="string">"First Post"</span>,
  story: {
    intro: <span class="string">"Before the jump"</span>,
    body: <span class="string">"After the jump"</span>
  }
}
</pre></td></tr></table></figure>

<p>helper 接收参数，参数为 JSON 属性的 上下文。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>Handlebars.registerHelper(<span class="string">'with'</span>, <span class="function"><span class="keyword">function</span><span class="params">(context, options)</span> {</span>
  <span class="keyword">return</span> options.fn(context);
});
</pre></td></tr></table></figure>

<h2 id=" 简单迭代器 _each_helper">简单迭代器 each helper</h2>
<p>Handlebars 内建了　<strong>each</strong>　迭代器</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"comments"</span>&gt;</span>
  &#123;&#123;#each comments}}
    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"comment"</span>&gt;</span>
      <span class="tag">&lt;<span class="title">h2</span>&gt;</span>&#123;&#123;subject}}<span class="tag">&lt;/<span class="title">h2</span>&gt;</span>
      &#123;&#123;{body}}}
    <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
  &#123;&#123;/each}}
<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
</pre></td></tr></table></figure>

<p>实现原理如下：　把 comments 数组的每一个元素作为上下文解析模板</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre>Handlebars.registerHelper(<span class="string">'each'</span>, <span class="function"><span class="keyword">function</span><span class="params">(context, options)</span> {</span>
  <span class="keyword">var</span> ret = <span class="string">""</span>;

  <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>, j=context.length; i&lt;j; i++) {
    ret = ret + options.fn(context[i]);
  }

  <span class="keyword">return</span> ret;
});
</pre></td></tr></table></figure>

<p>可以用 <code>this</code> 引用迭代元素</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">ul</span> <span class="attribute">class</span>=<span class="value">"people_list"</span>&gt;</span>
  &#123;&#123;#each people}}
  <span class="tag">&lt;<span class="title">li</span>&gt;</span>&#123;&#123;this}}<span class="tag">&lt;/<span class="title">li</span>&gt;</span>
  &#123;&#123;/each}}
<span class="tag">&lt;/<span class="title">ul</span>&gt;</span>
</pre></td></tr></table></figure>

<p>上下文：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre>{
  people: [
    <span class="string">"Yehuda Katz"</span>,
    <span class="string">"Alan Johnson"</span>,
    <span class="string">"Charles Jolley"</span>
  ]
}
</pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">ul</span> <span class="attribute">class</span>=<span class="value">"people_list"</span>&gt;</span>
  <span class="tag">&lt;<span class="title">li</span>&gt;</span>Yehuda Katz<span class="tag">&lt;/<span class="title">li</span>&gt;</span>
  <span class="tag">&lt;<span class="title">li</span>&gt;</span>Alan Johnson<span class="tag">&lt;/<span class="title">li</span>&gt;</span>
  <span class="tag">&lt;<span class="title">li</span>&gt;</span>Charles Jolley<span class="tag">&lt;/<span class="title">li</span>&gt;</span>
<span class="tag">&lt;/<span class="title">ul</span>&gt;</span>
</pre></td></tr></table></figure>

<p>当某一项为空时，可以用 </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>&#123;&#123;else}}
</pre></td></tr></table></figure>

<p> 表达式</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>&#123;&#123;#each paragraphs}}
  <span class="tag">&lt;<span class="title">p</span>&gt;</span>&#123;&#123;this}}<span class="tag">&lt;/<span class="title">p</span>&gt;</span>
&#123;&#123;else}}
  <span class="tag">&lt;<span class="title">p</span> <span class="attribute">class</span>=<span class="value">"empty"</span>&gt;</span>No content<span class="tag">&lt;/<span class="title">p</span>&gt;</span>
&#123;&#123;/each}}
</pre></td></tr></table></figure>

<p>通过 </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>&#123;&#123;@index}}
</pre></td></tr></table></figure>

<p> 可以引用当前的循环索引</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>&#123;&#123;#each array}}
  &#123;&#123;@index}}: &#123;&#123;this}}
&#123;&#123;/each}}
</pre></td></tr></table></figure>

<p>用 </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>&#123;&#123;@key}}
</pre></td></tr></table></figure>

<p>引用当前的键名：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>&#123;&#123;#each object}}
  &#123;&#123;@key}}: &#123;&#123;this}}
&#123;&#123;/each}}
</pre></td></tr></table></figure>

<p>数组迭代的第一步和最后一步用 <code>@first</code> 和 <code>@last</code> 变量表示， 对象迭代时仅 <code>@first</code> 可用。</p>
<h2 id=" 条件语句 _if_helper">条件语句 if helper</h2>
<p>如果条件参数返回 <code>false</code>, <code>undefined</code>, <code>null</code>, <code>&quot;&quot;</code> 或 <code>[]</code>（非真的值）时，Handlebars 将不渲染该块</p>
<p>Handlebars 内建了 <code>if</code> 和 <code>unless</code> 语句</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>&#123;&#123;#if isActive}}
  <span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"star.gif"</span> <span class="attribute">alt</span>=<span class="value">"Active"</span>&gt;</span>
&#123;&#123;/if}}
</pre></td></tr></table></figure>

<p>实现原理：根据传入的条件参数，判断是否解析模板</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>Handlebars.registerHelper(<span class="string">'if'</span>, <span class="function"><span class="keyword">function</span><span class="params">(conditional, options)</span> {</span>
  <span class="keyword">if</span>(conditional) {
    <span class="keyword">return</span> options.fn(<span class="keyword">this</span>);
  }
});
</pre></td></tr></table></figure>

<p>Handlebars 还提供了 <code>else</code> 语句</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>&#123;&#123;#if isActive}}
  <span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"star.gif"</span> <span class="attribute">alt</span>=<span class="value">"Active"</span>&gt;</span>
&#123;&#123;else}}
  <span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"cry.gif"</span> <span class="attribute">alt</span>=<span class="value">"Inactive"</span>&gt;</span>
&#123;&#123;/if}}
</pre></td></tr></table></figure>

<h2 id="unless_helper">unless helper</h2>
<p><code>unless</code> 跟 <code>if</code> 正好相反，如果表达式返回 false ，模板将被渲染。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"entry"</span>&gt;</span>
  &#123;&#123;#unless license}}
  <span class="tag">&lt;<span class="title">h3</span> <span class="attribute">class</span>=<span class="value">"warning"</span>&gt;</span>WARNING: This entry does not have a license!<span class="tag">&lt;/<span class="title">h3</span>&gt;</span>
  &#123;&#123;/unless}}
<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
</pre></td></tr></table></figure>

<p>当 license 返回 <code>false</code>，Handlebars 将渲染 warning 。</p>
<h2 id="log_helper">log helper</h2>
<p>记录上下文状态</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>&#123;&#123;log "Look at me!"}}
</pre></td></tr></table></figure>

<h1 id="JavaScript_ 编译模板 ">JavaScript 编译模板</h1>
<p>模板可以包含在特殊的 <code>&lt;script&gt;</code> 里：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">script</span> <span class="attribute">id</span>=<span class="value">"entry-template"</span> <span class="attribute">type</span>=<span class="value">"text/x-handlebars-template"</span>&gt;</span><span class="javascript">
  template content
</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
</pre></td></tr></table></figure>

<p>然后用 <code>Handlebars.compile</code> 编译模板</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="keyword">var</span> source   = $(<span class="string">"#entry-template"</span>).html();
<span class="keyword">var</span> template = Handlebars.compile(source);
</pre></td></tr></table></figure>

<p>获取编译后的 HTML 模板，用 JSON 数据填充模板</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="keyword">var</span> context = {title: <span class="string">"My New Post"</span>, body: <span class="string">"This is my first post!"</span>}
<span class="keyword">var</span> html    = template(context);
</pre></td></tr></table></figure>

<p>最终结果：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"entry"</span>&gt;</span>
  <span class="tag">&lt;<span class="title">h1</span>&gt;</span>My New Post<span class="tag">&lt;/<span class="title">h1</span>&gt;</span>
  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"body"</span>&gt;</span>
    This is my first post!
  <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
</pre></td></tr></table></figure>

<h2 id="HTML_ 转义 ">HTML 转义</h2>
<p>不想转义用 </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>&#123;&#123;&#123;
</pre></td></tr></table></figure>

<p>模板：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"entry"</span>&gt;</span>
  <span class="tag">&lt;<span class="title">h1</span>&gt;</span>&#123;&#123;title}}<span class="tag">&lt;/<span class="title">h1</span>&gt;</span>
  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"body"</span>&gt;</span>
    &#123;&#123;{body}}}
  <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
</pre></td></tr></table></figure>

<p>上下文数据：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>{
  title: <span class="string">"All about &lt;p&gt; Tags"</span>,
  body: <span class="string">"&lt;p&gt;This is a post about &lt;p&gt; tags&lt;/p&gt;"</span>
}
</pre></td></tr></table></figure>

<p>最终结果：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"entry"</span>&gt;</span>
  <span class="tag">&lt;<span class="title">h1</span>&gt;</span>All About &lt;p&gt; Tags<span class="tag">&lt;/<span class="title">h1</span>&gt;</span>
  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"body"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">p</span>&gt;</span>This is a post about &lt;p&gt; tags<span class="tag">&lt;/<span class="title">p</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
</pre></td></tr></table></figure>

<p> <code>Handlebars.SafeString</code> 方法不做转义，通常返回 <code>new Handlebars.SafeString(result)</code>。此种情形，你可能想手动转义参数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre>Handlebars.registerHelper(<span class="string">'link'</span>, <span class="function"><span class="keyword">function</span><span class="params">(text, url)</span> {</span>
  text = Handlebars.Utils.escapeExpression(text);
  url  = Handlebars.Utils.escapeExpression(url);

  <span class="keyword">var</span> result = <span class="string">'&lt;a href="'</span> + url + <span class="string">'"&gt;'</span> + text + <span class="string">'&lt;/a&gt;'</span>;

  <span class="keyword">return</span> <span class="keyword">new</span> Handlebars.SafeString(result);
});
</pre></td></tr></table></figure>

<p>模板注释 </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>&#123;&#123;! }}
</pre></td></tr></table></figure>

<p>或者 </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>&#123;&#123;!-- --}}
</pre></td></tr></table></figure>


<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"entry"</span>&gt;</span>
  &#123;&#123;! only output this author names if an author exists }}
  &#123;&#123;#if author}}
    <span class="tag">&lt;<span class="title">h1</span>&gt;</span>&#123;&#123;firstName}} &#123;&#123;lastName}}<span class="tag">&lt;/<span class="title">h1</span>&gt;</span>
  &#123;&#123;/if}}
<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
</pre></td></tr></table></figure>

<p>模板注释不会输出，HTML 注释会输出</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"entry"</span>&gt;</span>
  &#123;&#123;! This comment will not be in the output }}
  <span class="comment">&lt;!-- This comment will be in the output --&gt;</span>
<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
</pre></td></tr></table></figure>

<h2 id="Partials_ 局部模板 ">Partials 局部模板</h2>
<p>用 </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>&#123;&#123;&gt; partialName}}
</pre></td></tr></table></figure>

<p>引入局部模板，局部模板可以使字符串，也可以是编译模板的函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="keyword">var</span> source = <span class="string">"&lt;ul&gt;&#123;&#123;#people}}&lt;li&gt;&#123;&#123;&gt; link}}&lt;/li&gt;&#123;&#123;/people}}&lt;/ul&gt;"</span>;
</pre></td></tr></table></figure>


<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>Handlebars.registerPartial(<span class="string">'link'</span>, <span class="string">'&lt;a href="/people/&#123;&#123;id}}"&gt;&#123;&#123;name}}&lt;/a&gt;'</span>)
<span class="keyword">var</span> template = Handlebars.compile(source);
</pre></td></tr></table></figure>


<figure class="highlight js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="code"><pre><span class="keyword">var</span> data = { <span class="string">"people"</span>: [
    { <span class="string">"name"</span>: <span class="string">"Alan"</span>, <span class="string">"id"</span>: <span class="number">1</span> },
    { <span class="string">"name"</span>: <span class="string">"Yehuda"</span>, <span class="string">"id"</span>: <span class="number">2</span> }
  ]};

template(data);

<span class="comment">// Should render:</span>
<span class="comment">// &lt;ul&gt;</span>
<span class="comment">//   &lt;li&gt;&lt;a href="/people/1"&gt;Alan&lt;/a&gt;&lt;/li&gt;</span>
<span class="comment">//   &lt;li&gt;&lt;a href="/people/2"&gt;Yehuda&lt;/a&gt;&lt;/li&gt;</span>
<span class="comment">// &lt;/ul&gt;</span>
</pre></td></tr></table></figure>

<h1 id=" 内建工具 ">内建工具</h1>
<h2 id=" 转义字符串 ">转义字符串</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>Handlebars.Utils.escapeExpression(string)
</pre></td></tr></table></figure>

<h2 id=" 判断空值 ">判断空值</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>Handlebars.Utils.isEmpty(value)
</pre></td></tr></table></figure>

<h2 id=" 扩展对象 ">扩展对象</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>Handlebars.Utils.extend(foo, {bar: <span class="literal">true</span>})
</pre></td></tr></table></figure>

<h2 id=" 转字符串 ">转字符串</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>Handlebars.Utils.toString(obj)
</pre></td></tr></table></figure>

<h2 id=" 判断数组 ">判断数组</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>Handlebars.Utils.isArray(obj)
</pre></td></tr></table></figure>

<h2 id=" 判断函数 ">判断函数</h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>Handlebars.Utils.isFunction(obj)
</pre></td></tr></table></figure>

  
	</div>
		<footer class="article-footer clearfix">

  <div class="article-tags">
  
  <span></span> <a href="/tags/Handlebars/">Handlebars</a><a href="/tags/Node.js/">Node.js</a>
  </div>


<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Node.js/">Node.js</a>
</div>



<div class="article-share" id="share">

  
<div class="jiathis_style">
    <span class="jiathis_txt">分享到：</span>
    <a class="jiathis_button_tsina">新浪微博</a>
    <a class="jiathis_button_weixin">微信</a>
    <a class="jiathis_button_twitter">Twitter</a>
    <a class="jiathis_button_evernote">EverNote</a>
    <a href="http://www.jiathis.com/share?uid=1501277" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
</div>
<script type="text/javascript" >
    var jiathis_config={
    data_track_clickback:true,
    sm:"copy,renren,cqq",
    pic:"",
    summary:"",
     ralateuid:{"tsina":"1608907662"},hideMore:false}
    
  </script> 
<script type="text/javascript" src="//v3.jiathis.com/code/jia.js?uid=
1359953759521102" charset="utf-8"></script>      


</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 

<div class="next">
<a href="/2014/01/07/introduction-to-express/"  title="Express 入门">
 <strong>NEXT:</strong><br/> 
 <span>Express 入门
</span>
</a>
</div>

</nav>

	
<section class="comment">
	<div class="ds-thread"></div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
  <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="# 基础 _Blocks"><span class="toc-number">1.</span> <span class="toc-text">基础 Blocks</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="# 内建 _helper"><span class="toc-number">2.</span> <span class="toc-text">内建 helper</span></a></li><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#with_helper"><span class="toc-number">2.1.</span> <span class="toc-text">with helper</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="# 简单迭代器 _each_helper"><span class="toc-number">2.2.</span> <span class="toc-text">简单迭代器 each helper</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="# 条件语句 _if_helper"><span class="toc-number">2.3.</span> <span class="toc-text">条件语句 if helper</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#unless_helper"><span class="toc-number">2.4.</span> <span class="toc-text">unless helper</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#log_helper"><span class="toc-number">2.5.</span> <span class="toc-text">log helper</span></a></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#JavaScript_ 编译模板 "><span class="toc-number">3.</span> <span class="toc-text">JavaScript 编译模板</span></a></li><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#HTML_ 转义 "><span class="toc-number">3.1.</span> <span class="toc-text">HTML 转义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Partials_ 局部模板 "><span class="toc-number">3.2.</span> <span class="toc-text">Partials 局部模板</span></a></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="# 内建工具 "><span class="toc-number">4.</span> <span class="toc-text">内建工具</span></a></li><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="# 转义字符串 "><span class="toc-number">4.1.</span> <span class="toc-text">转义字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="# 判断空值 "><span class="toc-number">4.2.</span> <span class="toc-text">判断空值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="# 扩展对象 "><span class="toc-number">4.3.</span> <span class="toc-text">扩展对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="# 转字符串 "><span class="toc-number">4.4.</span> <span class="toc-text">转字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="# 判断数组 "><span class="toc-number">4.5.</span> <span class="toc-text">判断数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="# 判断函数 "><span class="toc-number">4.6.</span> <span class="toc-text">判断函数</span></a></li></ol>
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			<li><a href="/tags/AngularJS/" title="AngularJS">AngularJS<sup>4</sup></a></li>
		
			<li><a href="/tags/Blink/" title="Blink">Blink<sup>1</sup></a></li>
		
			<li><a href="/tags/CSS/" title="CSS">CSS<sup>5</sup></a></li>
		
			<li><a href="/tags/CSS3/" title="CSS3">CSS3<sup>1</sup></a></li>
		
			<li><a href="/tags/Chrome Extensions/" title="Chrome Extensions">Chrome Extensions<sup>1</sup></a></li>
		
			<li><a href="/tags/Debug/" title="Debug">Debug<sup>1</sup></a></li>
		
			<li><a href="/tags/Express/" title="Express">Express<sup>1</sup></a></li>
		
			<li><a href="/tags/Firebug/" title="Firebug">Firebug<sup>1</sup></a></li>
		
			<li><a href="/tags/Git/" title="Git">Git<sup>1</sup></a></li>
		
			<li><a href="/tags/Github Pages/" title="Github Pages">Github Pages<sup>1</sup></a></li>
		
			<li><a href="/tags/Grunt/" title="Grunt">Grunt<sup>2</sup></a></li>
		
			<li><a href="/tags/HTML5/" title="HTML5">HTML5<sup>1</sup></a></li>
		
			<li><a href="/tags/Handlebars/" title="Handlebars">Handlebars<sup>1</sup></a></li>
		
			<li><a href="/tags/JavaScript/" title="JavaScript">JavaScript<sup>3</sup></a></li>
		
			<li><a href="/tags/Javascript/" title="Javascript">Javascript<sup>1</sup></a></li>
		
			<li><a href="/tags/Node.js/" title="Node.js">Node.js<sup>4</sup></a></li>
		
			<li><a href="/tags/Octopress/" title="Octopress">Octopress<sup>2</sup></a></li>
		
			<li><a href="/tags/Opera/" title="Opera">Opera<sup>1</sup></a></li>
		
			<li><a href="/tags/Opera Extensions/" title="Opera Extensions">Opera Extensions<sup>1</sup></a></li>
		
			<li><a href="/tags/Safari/" title="Safari">Safari<sup>1</sup></a></li>
		
		</ul>
</div>


  
  <div class="tagcloudlist">
    <p class="asidetitle">标签云</p>
    <div class="tagcloudlist clearfix">
       <a href="/tags/AngularJS/" style="font-size: 17.50px;">AngularJS</a><a href="/tags/Blink/" style="font-size: 10.00px;">Blink</a><a href="/tags/CSS/" style="font-size: 20.00px;">CSS</a><a href="/tags/CSS3/" style="font-size: 10.00px;">CSS3</a><a href="/tags/Chrome Extensions/" style="font-size: 10.00px;">Chrome Extensions</a><a href="/tags/Debug/" style="font-size: 10.00px;">Debug</a><a href="/tags/Express/" style="font-size: 10.00px;">Express</a><a href="/tags/Firebug/" style="font-size: 10.00px;">Firebug</a><a href="/tags/Git/" style="font-size: 10.00px;">Git</a><a href="/tags/Github Pages/" style="font-size: 10.00px;">Github Pages</a><a href="/tags/Grunt/" style="font-size: 12.50px;">Grunt</a><a href="/tags/HTML5/" style="font-size: 10.00px;">HTML5</a><a href="/tags/Handlebars/" style="font-size: 10.00px;">Handlebars</a><a href="/tags/JavaScript/" style="font-size: 15.00px;">JavaScript</a><a href="/tags/Javascript/" style="font-size: 10.00px;">Javascript</a><a href="/tags/Node.js/" style="font-size: 17.50px;">Node.js</a><a href="/tags/Octopress/" style="font-size: 12.50px;">Octopress</a><a href="/tags/Opera/" style="font-size: 10.00px;">Opera</a><a href="/tags/Opera Extensions/" style="font-size: 10.00px;">Opera Extensions</a><a href="/tags/Safari/" style="font-size: 10.00px;">Safari</a><a href="/tags/WebKit/" style="font-size: 10.00px;">WebKit</a><a href="/tags/flexbox/" style="font-size: 10.00px;">flexbox</a><a href="/tags/iOS7/" style="font-size: 10.00px;">iOS7</a><a href="/tags/jQuery/" style="font-size: 10.00px;">jQuery</a><a href="/tags/requestAnimationFrame/" style="font-size: 10.00px;">requestAnimationFrame</a><a href="/tags/toString/" style="font-size: 10.00px;">toString</a><a href="/tags/translate/" style="font-size: 10.00px;">translate</a><a href="/tags/交互设计/" style="font-size: 10.00px;">交互设计</a><a href="/tags/代码高亮/" style="font-size: 10.00px;">代码高亮</a><a href="/tags/全文搜索/" style="font-size: 10.00px;">全文搜索</a><a href="/tags/原创/" style="font-size: 15.00px;">原创</a><a href="/tags/垂直居中/" style="font-size: 10.00px;">垂直居中</a><a href="/tags/居中/" style="font-size: 10.00px;">居中</a><a href="/tags/开发工具/" style="font-size: 10.00px;">开发工具</a><a href="/tags/弹性布局/" style="font-size: 10.00px;">弹性布局</a><a href="/tags/水平居中/" style="font-size: 10.00px;">水平居中</a><a href="/tags/浏览器/" style="font-size: 10.00px;">浏览器</a><a href="/tags/滑动门/" style="font-size: 10.00px;">滑动门</a><a href="/tags/用户体验/" style="font-size: 10.00px;">用户体验</a><a href="/tags/移动前端开发/" style="font-size: 10.00px;">移动前端开发</a>
    </div>
  </div>


  <div class="rsspart">
	<a href="atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
      <li><a href="http://www.gaiyong.me/" target="_blank">[低调的产品经理] <strong>敏感的胖子</strong></a></li>
      <li><a href="http://www.xcodezone.com/" target="_blank">[PHP架构师] <strong>jiangfeng3</strong></a></li>
      <li><a href="http://www.stylejar.com/" target="_blank">[热衷IOS的 PHP Coder] <strong>c小淡</strong></a></li>
      <li><a href="http://yangjian.me" target="_blank" title="YangJian">Alimon's Blog</a></li>
      <li><a href="http://hexo.io/" target="_blank" title="Hexo">Hexo</a></li>
    </ul>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	
	<section class="info">
		<p> Hi~ I&#39;m Alon Zhang, Doodler and Coder <br/>
			忙时码代码，无事乱涂鸦</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/newwave" target="_blank" title="weibo"></a>
		
		
		
		<a href="https://github.com/jinlong" target="_blank" title="github"></a>
		
		
	</div>
		<p class="copyright">Powered by <a href="http://zespia.tw/hexo/" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> © 2014 
		
		<a href="http://jinlong.github.io" target="_blank" title="Alon Zhang">Alon Zhang</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"jinlong"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 





<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F2bd777ce3d5910b5c44deb753c24f3e3' type='text/javascript'%3E%3C/script%3E"));
</script>


  </body>
</html>
